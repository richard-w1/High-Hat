{% extends 'layout.html' %}

{% block content %}
  <div class="card">
    <h2>Session #{{ incident.id }}</h2>
    <p><strong>Description:</strong> {{ incident.description or 'No description available' }}</p>
    <p><strong>Type:</strong> {{ incident.incident_type or 'Session' }}</p>
    {% if incident.confidence %}
      <p><strong>Confidence:</strong> {{ '%0.2f' % incident.confidence }}%</p>
    {% endif %}
    <p><strong>Started:</strong> {{ incident.started_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
    {% if incident.occurred_at and incident.occurred_at != incident.started_at %}
      <p><strong>Event Time:</strong> {{ incident.occurred_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
    {% endif %}

    {% if incident.images %}
      <div class="images">
        <h3>Captured Images:</h3>
        {% for img in incident.images %}
          <img src="/static/{{ img }}" alt="session image" style="max-width: 300px; margin: 10px;" />
        {% endfor %}
      </div>
    {% endif %}

    <div style="margin-top: 20px;">
      <a href="/" class="btn btn-primary">Back to Dashboard</a>
      <form method="POST" action="{{ url_for('delete_incident', incident_id=incident.id) }}" style="display: inline; margin-left: 10px;">
        <button class="btn btn-danger" type="submit" onclick="return confirm('Are you sure you want to delete this session?')">Delete Session</button>
      </form>
    </div>
  </div>
{% endblock %}
